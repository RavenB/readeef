{% define "content" %}
<link rel="import" href="/dist/polymer/polymer.html">
<link rel="import" href="/dist/paper-icon-button/paper-icon-button.html">
<link rel="import" href="/dist/pushstate-anchor/pushstate-anchor.html">

<link rel="import" href="/component/rf-app-scaffold">
<link rel="import" href="/component/rf-lazy-loader">

<dom-module id="rf-settings-base">
    <style>
.drawer-menu a {
    display: block;
    color: var(--text-primary-color);
    text-decoration: none;
    min-height: 20px;
    font-size: 16px;

    @apply(--layout-horizontal);
    @apply(--layout-center);
}

.drawer-menu paper-icon-button.item {
    padding: 8px;
    margin-left: 4px;
}
    </style>
    <template>
        <rf-app-scaffold>
            <div class="drawer-title">Settings</div>
            <div class="drawer-menu">
                <a is="pushstate-anchor" href="/web/settings/general" class="item">
                    <span>General</span>
                    <paper-ripple></paper-ripple>
                </a>
                <a is="pushstate-anchor" href="/web/settings/feeds" class="item">
                    <span>Feeds</span>
                    <paper-ripple></paper-ripple>
                </a>
                <a is="pushstate-anchor" href="/web/settings/share-services" class="item">
                    <span>Share Services</span>
                    <paper-ripple></paper-ripple>
                </a>
                <a is="pushstate-anchor" href="/web/settings/admin" class="item" hidden$="{{ !user.Admin }}">
                    <span>Administration</span>
                    <paper-ripple></paper-ripple>
                </a>
                <hr>
                <a is="pushstate-anchor" href="/web/feed/all" class="item">
                    <span>Back to feeds</span>
                    <paper-ripple></paper-ripple>
                </a>
                <a href="#" class="item" on-click="logout">
                    <span>Logout</span>
                    <paper-ripple></paper-ripple>
                </a>
            </div>
            <div class="main-narrow-title">
                <span hidden$="{{ !_computeSettingsIsActive(activeSettings, 'settings-general') }}">General</span>
                <span hidden$="{{ !_computeSettingsIsActive(activeSettings, 'settings-feeds') }}">Manage Feeds</span>
                <span hidden$="{{ !_computeSettingsIsActive(activeSettings, 'settings-share-services') }}">Share Services</span>
                <span hidden$="{{ !_computeSettingsIsActive(activeSettings, 'settings-admin') }}">Administration</span>
            </div>
            <div class="main-title">
                <span hidden$="{{ !_computeSettingsIsActive(activeSettings, 'settings-general') }}">General</span>
                <span hidden$="{{ !_computeSettingsIsActive(activeSettings, 'settings-feeds') }}">Manage Feeds</span>
                <span hidden$="{{ !_computeSettingsIsActive(activeSettings, 'settings-share-services') }}">Share Services</span>
                <span hidden$="{{ !_computeSettingsIsActive(activeSettings, 'settings-admin') }}">Administration</span>
            </div>
            <div class="main-content">
                <more-route-selector on-more-route-change="onRouteChange">
                    <iron-pages>
                        <rf-lazy-loader route="settings-general" import="/component/rf-settings-general"></rf-lazy-loader>
                        <rf-lazy-loader route="settings-feeds" import="/component/rf-settings-feeds"></rf-lazy-loader>
                        <rf-lazy-loader route="settings-share-services" import="/component/rf-settings-share-services"></rf-lazy-loader>
                        <rf-lazy-loader route="settings-admin" import="/component/rf-settings-admin" hidden$="{{ !user.Admin }}"></rf-lazy-loader>
                    </iron-pages>
                </more-route-selector>
            </div>
        </rf-app-scaffold>
    </template>
    <script>
        "use strict";
        Polymer({
            is: "rf-settings-base",
            properties: {
                user: Object,
                activeSettings: {
                    type: String,
                    notify: true
                }
            },

            logout: function(event) {
                Polymer.dom(document).querySelector('rf-router').logout();
            },

            onRouteChange: function(event, detail) {
                if (MoreRouting.isCurrentUrl('settings-general')) {
                    this.activeSettings = 'settings-general';
                } else if (MoreRouting.isCurrentUrl('settings-feeds')) {
                    this.activeSettings = 'settings-feeds';
                } else {
                    this.activeSettings = '';
                }
            },

            _computeSettingsIsActive(active, current) {
                return active == current;
            }

        })
    </script>
</dom-module>
{% end %}
